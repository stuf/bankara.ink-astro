---
import { getCollection } from 'astro:content';
import { Image } from 'astro:assets';

import WorksGalleryLayout from '../../layouts/WorksGallery.astro';

const works = (await getCollection('work')).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<WorksGalleryLayout title="Works">
  <main>
    <header>
      <h1>work</h1>
    </header>

    <div class="container mx-auto">
      <ul class="grid grid-cols-3 gap-4">
        {
          works.map(it => (
            <li class="border-2 border-red-500">
              <a href={`/works/${it.id}`}>
                <Image
                  src={it.data.image}
                  alt={it.data.title}
                  width={800}
                  loading="lazy"
                  decoding="async"
                  class="object-cover h-full w-full"
                />
              </a>
            </li>
          ))
        }
      </ul>
    </div>
  </main></WorksGalleryLayout
>
